import{u as B,r as p,g as D,e as n,h as f,c as u,a as e,d as i,t as g,w as x,v as V,n as y,F as K,i as M,o as d,j as S}from"./index-Dmb1MAEr.js";import{s as h}from"./showAlert-BaSqmw_f.js";const U={id:"todoListPage",class:"bg-half"},z=e("h1",null,[e("a",{href:"#"},"ONLINE TODO LIST")],-1),E={class:"todo_sm"},F={class:"conatiner todoListPage vhContainer"},I={class:"todoList_Content"},P={class:"inputBox"},R=e("i",{class:"fa fa-plus"},null,-1),Y=[R],W={class:"todoList_list"},j={class:"todoList_tab"},q={class:"todoList_items"},G={class:"todoList_item"},H={class:"todoList_label"},J=["onUpdate:modelValue","onClick"],Q=["onClick"],X=e("i",{class:"fa fa-times"},null,-1),Z=[X],ee={class:"todoList_statistics"},te={key:0},se={key:1},c="https://todolist-api.hexschool.io",le={__name:"TodoView",setup(oe){const _=B(),m=p({nickname:"",uid:""});D(async()=>{w(),setInterval(w,5*60*1e3)});const w=async()=>{try{const t=document.cookie.replace(/(?:(?:^|.*;\s*)customName\s*=\s*([^;]*).*$)|^.*$/,"$1");t||(h("You haven't login or your token is expired!","Redirect to login page","warning","OK"),_.push("/login")),n.defaults.headers.common.Authorization=t;const s=await n.get(`${c}/users/checkout`);m.value=s.data,v()}catch(t){console.log(t.response.data.message),$(),h("Your token is expired!","You will be sign out directly!","warning","OK"),_.push("/login")}},T=async()=>{try{await n.post(`${c}/users/sign_out`,{}),$(),h("Logout Success","Redirect to login page","success","OK"),_.push("/login")}catch(t){console.log(t.response.data.message)}},$=()=>{n.defaults.headers.common.Authorization="",document.cookie="customName=;",m.value={}},l=p([]),v=async()=>{try{const t=await n.get(`${c}/todos`);l.value=t.data.data}catch(t){console.log(t.response.data.message)}},r=p(""),b=async()=>{if(r.value.trim().length===0){h("New task cannot be empty!","Please enter a valid task!","warning","OK");return}try{await n.post(`${c}/todos`,{content:r.value}),v(),r.value=""}catch(t){console.log(t.response.data.message)}},N=async t=>{try{await n.delete(`${c}/todos/${t}`),v()}catch(s){console.log(s.response.data.message)}},O=f(()=>a.value==="all"?l.value:a.value==="working"?l.value.filter(t=>!t.status):l.value.filter(t=>t.status)),a=p("all"),A=async t=>{try{await n.patch(`${c}/todos/${t}/toggle`,{}),v()}catch(s){console.log(s.response.data.message)}},C=f(()=>l.value.reduce((t,s)=>t+!s.status,0)),L=f(()=>l.value.reduce((t,s)=>t+s.status,0));return(t,s)=>(d(),u("div",U,[e("nav",null,[z,e("ul",null,[e("li",E,[e("a",{href:"#",id:"nickName",onClick:s[0]||(s[0]=i(o=>a.value="all",["prevent"]))},[e("span",null,g(m.value.nickname)+"'s Todo List",1)])]),e("li",null,[e("a",{href:"#",onClick:T},"Logout")])])]),e("div",F,[e("div",I,[e("div",P,[x(e("input",{type:"text",placeholder:"Enter Task","onUpdate:modelValue":s[1]||(s[1]=o=>r.value=o)},null,512),[[V,r.value]]),e("a",{href:"#",onClick:s[2]||(s[2]=i(o=>b(),["prevent"]))},Y)]),e("div",W,[e("ul",j,[e("li",null,[e("a",{href:"#",id:"all",class:y({active:a.value==="all"}),onClick:s[3]||(s[3]=i(o=>a.value="all",["prevent"]))},"All",2)]),e("li",null,[e("a",{href:"#",id:"working",class:y({active:a.value==="working"}),onClick:s[4]||(s[4]=i(o=>a.value="working",["prevent"]))},"Working",2)]),e("li",null,[e("a",{href:"#",id:"done",class:y({active:a.value==="done"}),onClick:s[5]||(s[5]=i(o=>a.value="done",["prevent"]))},"Done",2)])]),e("div",q,[e("ul",G,[(d(!0),u(K,null,M(O.value,o=>(d(),u("li",{key:o.id},[e("label",H,[x(e("input",{class:"todoList_input",type:"checkbox","onUpdate:modelValue":k=>o.status=k,onClick:k=>A(o.id)},null,8,J),[[S,o.status]]),e("span",null,g(o.content),1)]),e("a",{href:"#",onClick:i(k=>N(o.id),["prevent"])},Z,8,Q)]))),128))]),e("div",ee,[C.value+L.value==0?(d(),u("p",te,"No tasks added")):(d(),u("p",se,g(C.value)+" pending, "+g(L.value)+" complete",1))])])])])])]))}};export{le as default};
