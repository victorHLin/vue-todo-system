import{u as N,r as d,g as B,e as n,h as _,c as g,a as e,d as i,t as v,w as $,v as V,n as m,F as A,i as M,o as k,j as z}from"./index-CAtGiEpz.js";const E={id:"todoListPage",class:"bg-half"},F=e("h1",null,[e("a",{href:"#"},"ONLINE TODO LIST")],-1),O={class:"todo_sm"},S={class:"conatiner todoListPage vhContainer"},U={class:"todoList_Content"},I={class:"inputBox"},P=e("i",{class:"fa fa-plus"},null,-1),W=[P],j={class:"todoList_list"},R={class:"todoList_tab"},Y={class:"todoList_items"},q={class:"todoList_item"},G={class:"todoList_label"},H=["onUpdate:modelValue","onClick"],J=["onClick"],K=e("i",{class:"fa fa-times"},null,-1),Q=[K],X={class:"todoList_statistics"},c="https://todolist-api.hexschool.io",te={__name:"TodoView",setup(Z){const f=N(),p=d({nickname:"",uid:""});B(async()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)customName\s*=\s*([^;]*).*$)|^.*$/,"$1");n.defaults.headers.common.Authorization=t,t?w():(alert("You haven't login"),f.push("/login"))});const w=async()=>{try{const t=await n.get(`${c}/users/checkout`);p.value=t.data,r()}catch(t){console.log(t.response.data.message),y()}},y=async()=>{try{await n.post(`${c}/users/sign_out`,{}),n.defaults.headers.common.Authorization="",document.cookie="customName=;",p.value={},alert("Logout success!"),f.push("/login")}catch(t){console.log(t.response.data.message)}},l=d([]),r=async()=>{try{const t=await n.get(`${c}/todos`);l.value=t.data.data}catch(t){console.log(t.response.data.message)}},u=d(""),C=async()=>{try{await n.post(`${c}/todos`,{content:u.value}),r(),u.value=""}catch(t){console.log(t.response.data.message)}},L=async t=>{try{await n.delete(`${c}/todos/${t}`),r()}catch(s){console.log(s.response.data.message)}},T=_(()=>a.value==="all"?l.value:a.value==="working"?l.value.filter(t=>!t.status):l.value.filter(t=>t.status)),a=d("all"),x=async t=>{try{await n.patch(`${c}/todos/${t}/toggle`,{}),r()}catch(s){console.log(s.response.data.message)}},b=_(()=>l.value.reduce((t,s)=>t+!s.status,0)),D=_(()=>l.value.reduce((t,s)=>t+s.status,0));return(t,s)=>(k(),g("div",E,[e("nav",null,[F,e("ul",null,[e("li",O,[e("a",{href:"#",id:"nickName",onClick:s[0]||(s[0]=i(o=>a.value="all",["prevent"]))},[e("span",null,v(p.value.nickname)+"'s Todo List",1)])]),e("li",null,[e("a",{href:"#",onClick:y},"Logout")])])]),e("div",S,[e("div",U,[e("div",I,[$(e("input",{type:"text",placeholder:"Enter Task","onUpdate:modelValue":s[1]||(s[1]=o=>u.value=o)},null,512),[[V,u.value]]),e("a",{href:"#",onClick:s[2]||(s[2]=i(o=>C(),["prevent"]))},W)]),e("div",j,[e("ul",R,[e("li",null,[e("a",{href:"#",id:"all",class:m({active:a.value==="all"}),onClick:s[3]||(s[3]=i(o=>a.value="all",["prevent"]))},"All",2)]),e("li",null,[e("a",{href:"#",id:"working",class:m({active:a.value==="working"}),onClick:s[4]||(s[4]=i(o=>a.value="working",["prevent"]))},"Working",2)]),e("li",null,[e("a",{href:"#",id:"done",class:m({active:a.value==="done"}),onClick:s[5]||(s[5]=i(o=>a.value="done",["prevent"]))},"Done",2)])]),e("div",Y,[e("ul",q,[(k(!0),g(A,null,M(T.value,o=>(k(),g("li",{key:o.id},[e("label",G,[$(e("input",{class:"todoList_input",type:"checkbox","onUpdate:modelValue":h=>o.status=h,onClick:h=>x(o.id)},null,8,H),[[z,o.status]]),e("span",null,v(o.content),1)]),e("a",{href:"#",onClick:i(h=>L(o.id),["prevent"])},Q,8,J)]))),128))]),e("div",X,[e("p",null,v(b.value)+" still working, "+v(D.value)+" Done",1)])])])])])]))}};export{te as default};
